import{_ as p}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c,b as s,d as r,a as t,w as o,r as i,o as y,e as l}from"./app-D8qZw_Gl.js";const E={};function d(A,n){const F=i("CodeTabs");return y(),c("div",null,[n[6]||(n[6]=s("h1",{id:"锁表处理",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#锁表处理"},[s("span",null,"锁表处理")])],-1)),n[7]||(n[7]=s("h2",{id:"查看锁",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#查看锁"},[s("span",null,"查看锁")])],-1)),r(F,{id:"6",data:[{id:"查询锁表信息1"},{id:"查询锁表信息2"},{id:"查询锁表记录"}],"tab-id":"shell"},{title0:o(({value:a,isActive:e})=>n[0]||(n[0]=[l("查询锁表信息1")])),title1:o(({value:a,isActive:e})=>n[1]||(n[1]=[l("查询锁表信息2")])),title2:o(({value:a,isActive:e})=>n[2]||(n[2]=[l("查询锁表记录")])),tab0:o(({value:a,isActive:e})=>n[3]||(n[3]=[s("div",{class:"language-sql line-numbers-mode","data-highlighter":"shiki","data-ext":"sql",style:{"background-color":"#272822",color:"#F8F8F2"}},[s("pre",{class:"shiki monokai vp-code"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#88846F"}},"------------------------------------------")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#88846F"}},"--查询锁表信息")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#88846F"}},"------------------------------------------")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F92672"}},"SELECT"),s("span",{style:{color:"#F8F8F2"}}," ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AE81FF"}},"  LOC"),s("span",{style:{color:"#F8F8F2"}},"."),s("span",{style:{color:"#AE81FF"}},"SESSION_ID"),s("span",{style:{color:"#F92672"}}," ||"),s("span",{style:{color:"#E6DB74"}}," ','"),s("span",{style:{color:"#F92672"}}," ||"),s("span",{style:{color:"#AE81FF"}}," SESS"),s("span",{style:{color:"#F8F8F2"}},"."),s("span",{style:{color:"#AE81FF"}},"SERIAL"),s("span",{style:{color:"#F8F8F2"}},"# "),s("span",{style:{color:"#F92672"}},"KEY"),s("span",{style:{color:"#F8F8F2"}},", ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AE81FF"}},"  LOC"),s("span",{style:{color:"#F8F8F2"}},"."),s("span",{style:{color:"#AE81FF"}},"SESSION_ID"),s("span",{style:{color:"#F92672"}},"      SID"),s("span",{style:{color:"#F8F8F2"}},", ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AE81FF"}},"  SESS"),s("span",{style:{color:"#F8F8F2"}},"."),s("span",{style:{color:"#AE81FF"}},"SERIAL"),s("span",{style:{color:"#F8F8F2"}},"#, ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AE81FF"}},"  LOC"),s("span",{style:{color:"#F8F8F2"}},"."),s("span",{style:{color:"#AE81FF"}},"LOCKED_MODE"),s("span",{style:{color:"#F8F8F2"}},"     锁模式, ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AE81FF"}},"  LOC"),s("span",{style:{color:"#F8F8F2"}},"."),s("span",{style:{color:"#AE81FF"}},"ORACLE_USERNAME"),s("span",{style:{color:"#F8F8F2"}}," 登录用户, ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AE81FF"}},"  LOC"),s("span",{style:{color:"#F8F8F2"}},"."),s("span",{style:{color:"#AE81FF"}},"OS_USER_NAME"),s("span",{style:{color:"#F8F8F2"}},"    登录机器用户名, ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AE81FF"}},"  SESS"),s("span",{style:{color:"#F8F8F2"}},"."),s("span",{style:{color:"#AE81FF"}},"PROGRAM"),s("span",{style:{color:"#F8F8F2"}},"        软件,")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AE81FF"}},"  SESS"),s("span",{style:{color:"#F8F8F2"}},"."),s("span",{style:{color:"#AE81FF"}},"MACHINE"),s("span",{style:{color:"#F8F8F2"}},"        机器名, ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AE81FF"}},"  SESS"),s("span",{style:{color:"#F8F8F2"}},"."),s("span",{style:{color:"#AE81FF"}},"TERMINAL"),s("span",{style:{color:"#F8F8F2"}},"       终端用户名, ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AE81FF"}},"  OBJ"),s("span",{style:{color:"#F8F8F2"}},"."),s("span",{style:{color:"#AE81FF"}},"OBJECT_NAME"),s("span",{style:{color:"#F8F8F2"}},"     被锁对象名, ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AE81FF"}},"  SESS"),s("span",{style:{color:"#F8F8F2"}},"."),s("span",{style:{color:"#AE81FF"}},"LOGON_TIME"),s("span",{style:{color:"#F8F8F2"}},"     登录数据库时间,")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AE81FF"}},"  LOC"),s("span",{style:{color:"#F8F8F2"}},"."),s("span",{style:{color:"#AE81FF"}},"LOCKED_MODE"),s("span",{style:{color:"#F8F8F2"}},"     锁定模式,")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AE81FF"}},"  SESS"),s("span",{style:{color:"#F8F8F2"}},"."),s("span",{style:{color:"#AE81FF"}},"LOCKWAIT"),s("span",{style:{color:"#F8F8F2"}},"       等待,")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E6DB74"}},"  'ALTER SYSTEM KILL SESSION '''"),s("span",{style:{color:"#F92672"}}," ||"),s("span",{style:{color:"#AE81FF"}}," loc"),s("span",{style:{color:"#F8F8F2"}},"."),s("span",{style:{color:"#AE81FF"}},"SESSION_ID"),s("span",{style:{color:"#F92672"}}," ||"),s("span",{style:{color:"#E6DB74"}}," ','"),s("span",{style:{color:"#F92672"}}," ||"),s("span",{style:{color:"#AE81FF"}}," sess"),s("span",{style:{color:"#F8F8F2"}},"."),s("span",{style:{color:"#AE81FF"}},"SERIAL"),s("span",{style:{color:"#F8F8F2"}},"# "),s("span",{style:{color:"#F92672"}},"||"),s("span",{style:{color:"#E6DB74"}}," ''';'"),s("span",{style:{color:"#F92672"}}," AS"),s("span",{style:{color:"#F8F8F2"}}," 强制结束会话语句")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F92672"}},"FROM"),s("span",{style:{color:"#F8F8F2"}}," V$LOCKED_OBJECT LOC")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F92672"}},"  LEFT JOIN"),s("span",{style:{color:"#F8F8F2"}}," ALL_OBJECTS OBJ "),s("span",{style:{color:"#F92672"}},"ON"),s("span",{style:{color:"#AE81FF"}}," LOC"),s("span",{style:{color:"#F8F8F2"}},"."),s("span",{style:{color:"#AE81FF"}},"OBJECT_ID"),s("span",{style:{color:"#F92672"}}," ="),s("span",{style:{color:"#AE81FF"}}," OBJ"),s("span",{style:{color:"#F8F8F2"}},"."),s("span",{style:{color:"#AE81FF"}},"OBJECT_ID"),s("span",{style:{color:"#F8F8F2"}}," ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F92672"}},"  LEFT JOIN"),s("span",{style:{color:"#F8F8F2"}}," V$"),s("span",{style:{color:"#F92672"}},"SESSION"),s("span",{style:{color:"#F8F8F2"}}," SESS "),s("span",{style:{color:"#F92672"}},"ON"),s("span",{style:{color:"#AE81FF"}}," LOC"),s("span",{style:{color:"#F8F8F2"}},"."),s("span",{style:{color:"#AE81FF"}},"OBJECT_ID"),s("span",{style:{color:"#F92672"}}," ="),s("span",{style:{color:"#AE81FF"}}," OBJ"),s("span",{style:{color:"#F8F8F2"}},"."),s("span",{style:{color:"#AE81FF"}},"OBJECT_ID"),s("span",{style:{color:"#F92672"}}," AND"),s("span",{style:{color:"#AE81FF"}}," LOC"),s("span",{style:{color:"#F8F8F2"}},"."),s("span",{style:{color:"#AE81FF"}},"SESSION_ID"),s("span",{style:{color:"#F92672"}}," ="),s("span",{style:{color:"#AE81FF"}}," SESS"),s("span",{style:{color:"#F8F8F2"}},"."),s("span",{style:{color:"#AE81FF"}},"SID"),s("span",{style:{color:"#F8F8F2"}}," ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F92672"}},"WHERE"),s("span",{style:{color:"#AE81FF"}}," 1"),s("span",{style:{color:"#F92672"}},"="),s("span",{style:{color:"#AE81FF"}},"1"),s("span",{style:{color:"#F8F8F2"}},";")])])]),s("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])],-1)])),tab1:o(({value:a,isActive:e})=>n[4]||(n[4]=[s("div",{class:"language-sql line-numbers-mode","data-highlighter":"shiki","data-ext":"sql",style:{"background-color":"#272822",color:"#F8F8F2"}},[s("pre",{class:"shiki monokai vp-code"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#F92672"}},"SELECT"),s("span",{style:{color:"#AE81FF"}}," lo"),s("span",{style:{color:"#F8F8F2"}},"."),s("span",{style:{color:"#AE81FF"}},"inst_id"),s("span",{style:{color:"#F8F8F2"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AE81FF"}},"       lo"),s("span",{style:{color:"#F8F8F2"}},"."),s("span",{style:{color:"#AE81FF"}},"oracle_username"),s("span",{style:{color:"#F92672"}}," AS"),s("span",{style:{color:"#F8F8F2"}}," ora_user,")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AE81FF"}},"       lo"),s("span",{style:{color:"#F8F8F2"}},"."),s("span",{style:{color:"#AE81FF"}},"os_user_name"),s("span",{style:{color:"#F92672"}}," AS"),s("span",{style:{color:"#F8F8F2"}}," os_user,")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AE81FF"}},"       lo"),s("span",{style:{color:"#F8F8F2"}},"."),s("span",{style:{color:"#AE81FF"}},"process"),s("span",{style:{color:"#F8F8F2"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AE81FF"}},"       lo"),s("span",{style:{color:"#F8F8F2"}},"."),s("span",{style:{color:"#AE81FF"}},"locked_mode"),s("span",{style:{color:"#F8F8F2"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AE81FF"}},"       do"),s("span",{style:{color:"#F8F8F2"}},"."),s("span",{style:{color:"#AE81FF"}},"owner"),s("span",{style:{color:"#F8F8F2"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AE81FF"}},"       do"),s("span",{style:{color:"#F8F8F2"}},"."),s("span",{style:{color:"#AE81FF"}},"object_name"),s("span",{style:{color:"#F8F8F2"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AE81FF"}},"       s"),s("span",{style:{color:"#F8F8F2"}},"."),s("span",{style:{color:"#AE81FF"}},"sid"),s("span",{style:{color:"#F8F8F2"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AE81FF"}},"       s"),s("span",{style:{color:"#F8F8F2"}},"."),s("span",{style:{color:"#AE81FF"}},"serial"),s("span",{style:{color:"#F8F8F2"}},"#,")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E6DB74"}},"       'alter system kill session '''"),s("span",{style:{color:"#F92672"}}," ||"),s("span",{style:{color:"#AE81FF"}}," s"),s("span",{style:{color:"#F8F8F2"}},"."),s("span",{style:{color:"#AE81FF"}},"sid"),s("span",{style:{color:"#F92672"}}," ||"),s("span",{style:{color:"#E6DB74"}}," ','"),s("span",{style:{color:"#F92672"}}," ||"),s("span",{style:{color:"#AE81FF"}}," s"),s("span",{style:{color:"#F8F8F2"}},"."),s("span",{style:{color:"#AE81FF"}},"serial"),s("span",{style:{color:"#F8F8F2"}},"# "),s("span",{style:{color:"#F92672"}},"||"),s("span",{style:{color:"#E6DB74"}}," ',@'"),s("span",{style:{color:"#F92672"}}," ||")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AE81FF"}},"       s"),s("span",{style:{color:"#F8F8F2"}},"."),s("span",{style:{color:"#AE81FF"}},"inst_id"),s("span",{style:{color:"#F92672"}}," ||"),s("span",{style:{color:"#E6DB74"}}," ''';'"),s("span",{style:{color:"#F92672"}}," AS"),s("span",{style:{color:"#F8F8F2"}}," kill_ddl")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F92672"}},"  FROM"),s("span",{style:{color:"#F8F8F2"}}," gv$locked_object lo, dba_objects do, gv$"),s("span",{style:{color:"#F92672"}},"session"),s("span",{style:{color:"#F8F8F2"}}," s")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F92672"}}," WHERE"),s("span",{style:{color:"#AE81FF"}}," lo"),s("span",{style:{color:"#F8F8F2"}},"."),s("span",{style:{color:"#AE81FF"}},"object_id"),s("span",{style:{color:"#F92672"}}," ="),s("span",{style:{color:"#AE81FF"}}," do"),s("span",{style:{color:"#F8F8F2"}},"."),s("span",{style:{color:"#AE81FF"}},"object_id")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F92672"}},"   AND"),s("span",{style:{color:"#AE81FF"}}," lo"),s("span",{style:{color:"#F8F8F2"}},"."),s("span",{style:{color:"#AE81FF"}},"session_id"),s("span",{style:{color:"#F92672"}}," ="),s("span",{style:{color:"#AE81FF"}}," s"),s("span",{style:{color:"#F8F8F2"}},"."),s("span",{style:{color:"#AE81FF"}},"sid")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F92672"}},"   AND"),s("span",{style:{color:"#AE81FF"}}," lo"),s("span",{style:{color:"#F8F8F2"}},"."),s("span",{style:{color:"#AE81FF"}},"inst_id"),s("span",{style:{color:"#F92672"}}," ="),s("span",{style:{color:"#AE81FF"}}," s"),s("span",{style:{color:"#F8F8F2"}},"."),s("span",{style:{color:"#AE81FF"}},"inst_id")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F92672"}},"   AND"),s("span",{style:{color:"#AE81FF"}}," do"),s("span",{style:{color:"#F8F8F2"}},"."),s("span",{style:{color:"#AE81FF"}},"owner"),s("span",{style:{color:"#F92672"}}," ="),s("span",{style:{color:"#E6DB74"}}," 'OWNER'")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F92672"}},"   AND"),s("span",{style:{color:"#AE81FF"}}," do"),s("span",{style:{color:"#F8F8F2"}},"."),s("span",{style:{color:"#AE81FF"}},"object_name"),s("span",{style:{color:"#F92672"}}," ="),s("span",{style:{color:"#E6DB74"}}," 'TEST230317'"),s("span",{style:{color:"#F8F8F2"}},";")])])]),s("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])],-1)])),tab2:o(({value:a,isActive:e})=>n[5]||(n[5]=[s("div",{class:"language-sql line-numbers-mode","data-highlighter":"shiki","data-ext":"sql",style:{"background-color":"#272822",color:"#F8F8F2"}},[s("pre",{class:"shiki monokai vp-code"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#88846F"}},"------------------------------------------")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#88846F"}},"--表记录 锁定查询")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#88846F"}},"------------------------------------------")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F92672"}},"SELECT"),s("span",{style:{color:"#F8F8F2"}}," ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  LOC."),s("span",{style:{color:"#F92672"}},"*"),s("span",{style:{color:"#F8F8F2"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AE81FF"}},"  DOBJ"),s("span",{style:{color:"#F8F8F2"}},"."),s("span",{style:{color:"#AE81FF"}},"OWNER"),s("span",{style:{color:"#F8F8F2"}},", "),s("span",{style:{color:"#AE81FF"}},"DOBJ"),s("span",{style:{color:"#F8F8F2"}},"."),s("span",{style:{color:"#AE81FF"}},"OBJECT_NAME"),s("span",{style:{color:"#F8F8F2"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E6DB74"}},"  'ALTER SYSTEM KILL SESSION '''"),s("span",{style:{color:"#F92672"}}," ||"),s("span",{style:{color:"#AE81FF"}}," LOC"),s("span",{style:{color:"#F8F8F2"}},"."),s("span",{style:{color:"#AE81FF"}},"SESSION_ID"),s("span",{style:{color:"#F92672"}}," ||"),s("span",{style:{color:"#E6DB74"}}," ','"),s("span",{style:{color:"#F92672"}}," ||"),s("span",{style:{color:"#AE81FF"}}," SESS"),s("span",{style:{color:"#F8F8F2"}},"."),s("span",{style:{color:"#AE81FF"}},"SERIAL"),s("span",{style:{color:"#F8F8F2"}},"# "),s("span",{style:{color:"#F92672"}},"||"),s("span",{style:{color:"#E6DB74"}}," ''';'")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F92672"}},"FROM"),s("span",{style:{color:"#F8F8F2"}}," GV$LOCKED_OBJECT LOC")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F92672"}},"  LEFT JOIN"),s("span",{style:{color:"#F8F8F2"}}," DBA_OBJECTS DOBJ "),s("span",{style:{color:"#F92672"}},"ON"),s("span",{style:{color:"#AE81FF"}}," LOC"),s("span",{style:{color:"#F8F8F2"}},"."),s("span",{style:{color:"#AE81FF"}},"OBJECT_ID"),s("span",{style:{color:"#F92672"}}," ="),s("span",{style:{color:"#AE81FF"}}," DOBJ"),s("span",{style:{color:"#F8F8F2"}},"."),s("span",{style:{color:"#AE81FF"}},"OBJECT_ID")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F92672"}},"  LEFT JOIN"),s("span",{style:{color:"#F8F8F2"}}," GV$"),s("span",{style:{color:"#F92672"}},"SESSION"),s("span",{style:{color:"#F8F8F2"}}," SESS "),s("span",{style:{color:"#F92672"}},"ON"),s("span",{style:{color:"#AE81FF"}}," LOC"),s("span",{style:{color:"#F8F8F2"}},"."),s("span",{style:{color:"#AE81FF"}},"SESSION_ID"),s("span",{style:{color:"#F92672"}}," ="),s("span",{style:{color:"#AE81FF"}}," SESS"),s("span",{style:{color:"#F8F8F2"}},"."),s("span",{style:{color:"#AE81FF"}},"SID"),s("span",{style:{color:"#F92672"}}," AND"),s("span",{style:{color:"#AE81FF"}}," LOC"),s("span",{style:{color:"#F8F8F2"}},"."),s("span",{style:{color:"#AE81FF"}},"SESSION_ID"),s("span",{style:{color:"#F92672"}}," ="),s("span",{style:{color:"#AE81FF"}}," SESS"),s("span",{style:{color:"#F8F8F2"}},"."),s("span",{style:{color:"#AE81FF"}},"SID")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F92672"}},"WHERE"),s("span",{style:{color:"#AE81FF"}}," 1"),s("span",{style:{color:"#F92672"}},"="),s("span",{style:{color:"#AE81FF"}},"1")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F92672"}},"  AND"),s("span",{style:{color:"#AE81FF"}}," DOBJ"),s("span",{style:{color:"#F8F8F2"}},"."),s("span",{style:{color:"#AE81FF"}},"OBJECT_NAME"),s("span",{style:{color:"#F92672"}}," ="),s("span",{style:{color:"#F8F8F2"}}," &表名;")])])]),s("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])],-1)])),_:1}),n[8]||(n[8]=t(`<h2 id="查某session正在执行的sql语句" tabindex="-1"><a class="header-anchor" href="#查某session正在执行的sql语句"><span>查某SESSION正在执行的SQL语句</span></a></h2><p>查某SESSION 正在执行的SQL语句，从而可以快速定位到哪些操作或者代码导致事务一直进行没有结束等.</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" style="background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#88846F;">------------------------------------------</span></span>
<span class="line"><span style="color:#88846F;">--查某SESSION 正在执行的SQL语句，从而可以快速定位到哪些操作或者代码导致事务一直进行没有结束等.</span></span>
<span class="line"><span style="color:#88846F;">------------------------------------------</span></span>
<span class="line"><span style="color:#F92672;">SELECT</span><span style="color:#88846F;"> /*+ ORDERED */</span></span>
<span class="line"><span style="color:#F8F8F2;">  SQL_TEXT</span></span>
<span class="line"><span style="color:#F92672;">FROM</span><span style="color:#F8F8F2;"> V$SQLTEXT TX</span></span>
<span class="line"><span style="color:#F92672;">WHERE</span><span style="color:#F8F8F2;"> (</span><span style="color:#AE81FF;">TX</span><span style="color:#F8F8F2;">.</span><span style="color:#AE81FF;">HASH_VALUE</span><span style="color:#F8F8F2;">, </span><span style="color:#AE81FF;">TX</span><span style="color:#F8F8F2;">.</span><span style="color:#AE81FF;">ADDRESS</span><span style="color:#F8F8F2;">) </span><span style="color:#F92672;">IN</span><span style="color:#F8F8F2;"> (</span></span>
<span class="line"><span style="color:#F92672;">  SELECT</span><span style="color:#F8F8F2;"> </span></span>
<span class="line"><span style="color:#F8F8F2;">    DECODE(SQL_HASH_VALUE, </span><span style="color:#AE81FF;">0</span><span style="color:#F8F8F2;">, PREV_HASH_VALUE, SQL_HASH_VALUE),</span></span>
<span class="line"><span style="color:#F8F8F2;">    DECODE(SQL_HASH_VALUE, </span><span style="color:#AE81FF;">0</span><span style="color:#F8F8F2;">, PREV_SQL_ADDR, SQL_ADDRESS)</span></span>
<span class="line"><span style="color:#F92672;">  FROM</span><span style="color:#F8F8F2;"> V$</span><span style="color:#F92672;">SESSION</span><span style="color:#F8F8F2;"> SESS</span></span>
<span class="line"><span style="color:#F92672;">  WHERE</span><span style="color:#AE81FF;"> SESS</span><span style="color:#F8F8F2;">.</span><span style="color:#AE81FF;">SID</span><span style="color:#F92672;"> =</span><span style="color:#F8F8F2;"> &amp;</span><span style="color:#F92672;">SID</span></span>
<span class="line"><span style="color:#F8F8F2;">) </span><span style="color:#88846F;">/* 此处为SID*/</span></span>
<span class="line"><span style="color:#F92672;">ORDER BY</span><span style="color:#F8F8F2;"> PIECE </span><span style="color:#F92672;">ASC</span><span style="color:#F8F8F2;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="查看操作系统pid" tabindex="-1"><a class="header-anchor" href="#查看操作系统pid"><span>查看操作系统PID</span></a></h2><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" style="background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#88846F;">------------------------------------------</span></span>
<span class="line"><span style="color:#88846F;">--查看操作系统PID</span></span>
<span class="line"><span style="color:#88846F;">------------------------------------------</span></span>
<span class="line"><span style="color:#F92672;">SELECT</span><span style="color:#F8F8F2;"> </span></span>
<span class="line"><span style="color:#F8F8F2;">  SPID,OSUSER</span></span>
<span class="line"><span style="color:#F8F8F2;">  ,</span><span style="color:#AE81FF;">SESS</span><span style="color:#F8F8F2;">.</span><span style="color:#AE81FF;">PROGRAM</span><span style="color:#F8F8F2;"> </span></span>
<span class="line"><span style="color:#F92672;">FROM</span><span style="color:#F8F8F2;"> V$</span><span style="color:#F92672;">SESSION</span><span style="color:#F8F8F2;"> SESS</span></span>
<span class="line"><span style="color:#F92672;">  LEFT JOIN</span><span style="color:#F8F8F2;"> V$PROCESS PRO </span><span style="color:#F92672;">ON</span><span style="color:#AE81FF;"> SESS</span><span style="color:#F8F8F2;">.</span><span style="color:#AE81FF;">PADDR</span><span style="color:#F92672;">=</span><span style="color:#AE81FF;">PRO</span><span style="color:#F8F8F2;">.</span><span style="color:#AE81FF;">ADDR</span><span style="color:#F8F8F2;"> </span></span>
<span class="line"><span style="color:#F92672;">WHERE</span><span style="color:#AE81FF;"> 1</span><span style="color:#F92672;">=</span><span style="color:#AE81FF;">1</span></span>
<span class="line"><span style="color:#F92672;">  AND</span><span style="color:#AE81FF;"> SESS</span><span style="color:#F8F8F2;">.</span><span style="color:#AE81FF;">SID</span><span style="color:#F92672;"> =</span><span style="color:#F8F8F2;"> &amp;</span><span style="color:#F92672;">SID</span><span style="color:#F8F8F2;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,5))])}const u=p(E,[["render",d]]),m=JSON.parse('{"path":"/databases/oracle/Lock.html","title":"锁表处理","lang":"zh-CN","frontmatter":{},"git":{},"readingTime":{"minutes":0.48,"words":143},"filePathRelative":"databases/oracle/Lock.md"}');export{u as comp,m as data};
