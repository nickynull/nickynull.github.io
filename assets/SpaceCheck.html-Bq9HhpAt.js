import{_ as n}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,a as l,o as p}from"./app-BzR1ktM_.js";const e={};function o(F,s){return p(),a("div",null,s[0]||(s[0]=[l(`<h1 id="空间检查" tabindex="-1"><a class="header-anchor" href="#空间检查"><span>空间检查</span></a></h1><h2 id="查看最占空间的表" tabindex="-1"><a class="header-anchor" href="#查看最占空间的表"><span>查看最占空间的表</span></a></h2><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" style="background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#F92672;">WITH</span><span style="color:#F8F8F2;"> w1 </span><span style="color:#F92672;">AS</span></span>
<span class="line"><span style="color:#F8F8F2;"> (</span><span style="color:#F92672;">SELECT</span><span style="color:#AE81FF;"> ds</span><span style="color:#F8F8F2;">.</span><span style="color:#AE81FF;">owner</span><span style="color:#F8F8F2;">,</span></span>
<span class="line"><span style="color:#AE81FF;">         ds</span><span style="color:#F8F8F2;">.</span><span style="color:#AE81FF;">segment_name</span><span style="color:#F8F8F2;">,</span></span>
<span class="line"><span style="color:#AE81FF;">         ds</span><span style="color:#F8F8F2;">.</span><span style="color:#AE81FF;">segment_type</span><span style="color:#F8F8F2;">,</span></span>
<span class="line"><span style="color:#AE81FF;">         ds</span><span style="color:#F8F8F2;">.</span><span style="color:#AE81FF;">tablespace_name</span><span style="color:#F8F8F2;">,</span></span>
<span class="line"><span style="color:#AE81FF;">         ds</span><span style="color:#F8F8F2;">.</span><span style="color:#AE81FF;">bytes</span></span>
<span class="line"><span style="color:#F92672;">    FROM</span><span style="color:#F8F8F2;"> dba_segments ds</span></span>
<span class="line"><span style="color:#F92672;">   WHERE</span><span style="color:#AE81FF;"> ds</span><span style="color:#F8F8F2;">.</span><span style="color:#AE81FF;">segment_type</span><span style="color:#F92672;"> NOT</span><span style="color:#F92672;"> IN</span><span style="color:#F8F8F2;"> (</span><span style="color:#E6DB74;">&#39;LOBSEGMENT&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F92672;">  UNION ALL</span></span>
<span class="line"><span style="color:#F92672;">  SELECT</span><span style="color:#AE81FF;"> ds</span><span style="color:#F8F8F2;">.</span><span style="color:#AE81FF;">owner</span><span style="color:#F8F8F2;">,</span></span>
<span class="line"><span style="color:#AE81FF;">         ds2</span><span style="color:#F8F8F2;">.</span><span style="color:#AE81FF;">segment_name</span><span style="color:#F92672;"> AS</span><span style="color:#F8F8F2;"> segment_name,</span></span>
<span class="line"><span style="color:#AE81FF;">         ds</span><span style="color:#F8F8F2;">.</span><span style="color:#AE81FF;">segment_type</span><span style="color:#F8F8F2;">,</span></span>
<span class="line"><span style="color:#AE81FF;">         ds</span><span style="color:#F8F8F2;">.</span><span style="color:#AE81FF;">tablespace_name</span><span style="color:#F8F8F2;">,</span></span>
<span class="line"><span style="color:#AE81FF;">         ds</span><span style="color:#F8F8F2;">.</span><span style="color:#AE81FF;">bytes</span></span>
<span class="line"><span style="color:#F92672;">    FROM</span><span style="color:#F8F8F2;"> dba_segments ds, dba_lobs dl, dba_segments ds2</span></span>
<span class="line"><span style="color:#F92672;">   WHERE</span><span style="color:#AE81FF;"> ds</span><span style="color:#F8F8F2;">.</span><span style="color:#AE81FF;">owner</span><span style="color:#F92672;"> =</span><span style="color:#AE81FF;"> dl</span><span style="color:#F8F8F2;">.</span><span style="color:#AE81FF;">owner</span></span>
<span class="line"><span style="color:#F92672;">     AND</span><span style="color:#AE81FF;"> ds</span><span style="color:#F8F8F2;">.</span><span style="color:#AE81FF;">segment_name</span><span style="color:#F92672;"> =</span><span style="color:#AE81FF;"> dl</span><span style="color:#F8F8F2;">.</span><span style="color:#AE81FF;">segment_name</span></span>
<span class="line"><span style="color:#F92672;">     AND</span><span style="color:#AE81FF;"> dl</span><span style="color:#F8F8F2;">.</span><span style="color:#AE81FF;">owner</span><span style="color:#F92672;"> =</span><span style="color:#AE81FF;"> ds2</span><span style="color:#F8F8F2;">.</span><span style="color:#AE81FF;">owner</span></span>
<span class="line"><span style="color:#F92672;">     AND</span><span style="color:#AE81FF;"> dl</span><span style="color:#F8F8F2;">.</span><span style="color:#AE81FF;">table_name</span><span style="color:#F92672;"> =</span><span style="color:#AE81FF;"> ds2</span><span style="color:#F8F8F2;">.</span><span style="color:#AE81FF;">segment_name</span><span style="color:#F8F8F2;">),</span></span>
<span class="line"><span style="color:#F8F8F2;">w2 </span><span style="color:#F92672;">AS</span></span>
<span class="line"><span style="color:#F8F8F2;"> (</span><span style="color:#F92672;">SELECT</span><span style="color:#AE81FF;"> w1</span><span style="color:#F8F8F2;">.</span><span style="color:#AE81FF;">owner</span><span style="color:#F8F8F2;">,</span></span>
<span class="line"><span style="color:#AE81FF;">         w1</span><span style="color:#F8F8F2;">.</span><span style="color:#AE81FF;">segment_name</span><span style="color:#F8F8F2;">,</span></span>
<span class="line"><span style="color:#AE81FF;">         w1</span><span style="color:#F8F8F2;">.</span><span style="color:#AE81FF;">segment_type</span><span style="color:#F8F8F2;">,</span></span>
<span class="line"><span style="color:#AE81FF;">         w1</span><span style="color:#F8F8F2;">.</span><span style="color:#AE81FF;">tablespace_name</span><span style="color:#F92672;"> as</span><span style="color:#F8F8F2;"> tbs,</span></span>
<span class="line"><span style="color:#66D9EF;">         SUM</span><span style="color:#F8F8F2;">(</span><span style="color:#AE81FF;">w1</span><span style="color:#F8F8F2;">.</span><span style="color:#AE81FF;">bytes</span><span style="color:#F8F8F2;">) </span><span style="color:#F92672;">/</span><span style="color:#AE81FF;"> 1024</span><span style="color:#F92672;"> /</span><span style="color:#AE81FF;"> 1024</span><span style="color:#F92672;"> /</span><span style="color:#AE81FF;"> 1024</span><span style="color:#F92672;"> AS</span><span style="color:#F8F8F2;"> size_g</span></span>
<span class="line"><span style="color:#F92672;">    FROM</span><span style="color:#F8F8F2;"> w1</span></span>
<span class="line"><span style="color:#F92672;">   GROUP BY</span><span style="color:#AE81FF;"> w1</span><span style="color:#F8F8F2;">.</span><span style="color:#AE81FF;">owner</span><span style="color:#F8F8F2;">, </span><span style="color:#AE81FF;">w1</span><span style="color:#F8F8F2;">.</span><span style="color:#AE81FF;">segment_name</span><span style="color:#F8F8F2;">, </span><span style="color:#AE81FF;">w1</span><span style="color:#F8F8F2;">.</span><span style="color:#AE81FF;">segment_type</span><span style="color:#F8F8F2;">, </span><span style="color:#AE81FF;">w1</span><span style="color:#F8F8F2;">.</span><span style="color:#AE81FF;">tablespace_name</span></span>
<span class="line"><span style="color:#F92672;">   ORDER BY</span><span style="color:#AE81FF;"> 5</span><span style="color:#F92672;"> DESC</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F92672;">SELECT</span><span style="color:#F92672;"> *</span><span style="color:#F92672;"> FROM</span><span style="color:#F8F8F2;"> w2 </span><span style="color:#F92672;">WHERE</span><span style="color:#F8F8F2;"> rownum </span><span style="color:#F92672;">&lt;</span><span style="color:#AE81FF;"> 101</span><span style="color:#F8F8F2;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,3)]))}const t=n(e,[["render",o]]),y=JSON.parse('{"path":"/databases/oracle/SpaceCheck.html","title":"空间检查","lang":"zh-CN","frontmatter":{},"git":{},"readingTime":{"minutes":0.08,"words":23},"filePathRelative":"databases/oracle/SpaceCheck.md"}');export{t as comp,y as data};
