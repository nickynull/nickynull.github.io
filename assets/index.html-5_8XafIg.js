import{_ as n}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,a as e,o as l}from"./app-DXkG3HHq.js";const o="/imgs/docker-logo.png",p={};function r(c,s){return l(),a("div",null,s[0]||(s[0]=[e('<h1 id="docker" tabindex="-1"><a class="header-anchor" href="#docker"><span>Docker</span></a></h1><div class="md-logo"><img src="'+o+`" alt="img"></div><blockquote><p><strong>Docker</strong> 是开源的应用容器引擎</p></blockquote><p><a href="https://docker.com" target="_blank" rel="noopener noreferrer">Docker官网 https://docker.com</a><br><a href="https://hub.docker.com/" target="_blank" rel="noopener noreferrer">Docker镜像库 https://hub.docker.com/</a></p><h2 id="docker-基本概念" tabindex="-1"><a class="header-anchor" href="#docker-基本概念"><span>Docker 基本概念</span></a></h2><ul><li><code>Docker 主机（Host）</code>：安装Docker的主机</li><li><code>Docker 镜像（Image）</code>：容器的模板</li><li><code>Docker 容器（Container）</code>：镜像的实例</li><li><code>Docker 仓库（Repository）</code>：用来保存镜像</li></ul><h2 id="docker-安装" tabindex="-1"><a class="header-anchor" href="#docker-安装"><span>Docker 安装</span></a></h2><blockquote><p>官方自动化脚本</p></blockquote><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#A6E22E;">curl</span><span style="color:#AE81FF;"> -fsSL</span><span style="color:#E6DB74;"> https://get.docker.com</span><span style="color:#F92672;"> |</span><span style="color:#A6E22E;"> bash</span><span style="color:#AE81FF;"> -s</span><span style="color:#E6DB74;"> docker</span><span style="color:#AE81FF;"> --mirror</span><span style="color:#E6DB74;"> Aliyun</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><blockquote><p><a href="https://docs.docker.com/engine/install/centos/" target="_blank" rel="noopener noreferrer">Docker官方安装指导(CentOS)</a><br> 如果要安装新版本，需要先卸载</p></blockquote><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#A6E22E;">sudo</span><span style="color:#E6DB74;"> yum</span><span style="color:#E6DB74;"> remove</span><span style="color:#E6DB74;"> docker</span><span style="color:#AE81FF;"> \\</span></span>
<span class="line"><span style="color:#E6DB74;">                docker-client</span><span style="color:#AE81FF;"> \\</span></span>
<span class="line"><span style="color:#E6DB74;">                docker-client-latest</span><span style="color:#AE81FF;"> \\</span></span>
<span class="line"><span style="color:#E6DB74;">                docker-common</span><span style="color:#AE81FF;"> \\</span></span>
<span class="line"><span style="color:#E6DB74;">                docker-latest</span><span style="color:#AE81FF;"> \\</span></span>
<span class="line"><span style="color:#E6DB74;">                docker-latest-logrotate</span><span style="color:#AE81FF;"> \\</span></span>
<span class="line"><span style="color:#E6DB74;">                docker-logrotate</span><span style="color:#AE81FF;"> \\</span></span>
<span class="line"><span style="color:#E6DB74;">                docker-engine</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>安装</p></blockquote><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#A6E22E;">sudo</span><span style="color:#E6DB74;"> yum</span><span style="color:#E6DB74;"> install</span><span style="color:#AE81FF;"> -y</span><span style="color:#E6DB74;"> yum-utils</span></span>
<span class="line"><span style="color:#A6E22E;">sudo</span><span style="color:#E6DB74;"> yum-config-manager</span><span style="color:#AE81FF;"> --add-repo</span><span style="color:#E6DB74;"> https://download.docker.com/linux/centos/docker-ce.repo</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6E22E;">sudo</span><span style="color:#E6DB74;"> yum</span><span style="color:#E6DB74;"> install</span><span style="color:#E6DB74;"> docker-ce</span><span style="color:#E6DB74;"> docker-ce-cli</span><span style="color:#E6DB74;"> containerd.io</span><span style="color:#E6DB74;"> docker-buildx-plugin</span><span style="color:#E6DB74;"> docker-compose-plugin</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>安装是否成功验证</p></blockquote><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#A6E22E;">sudo</span><span style="color:#E6DB74;"> docker</span><span style="color:#E6DB74;"> run</span><span style="color:#E6DB74;"> hello-world</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="dockerfile" tabindex="-1"><a class="header-anchor" href="#dockerfile"><span>Dockerfile</span></a></h2><blockquote><p>Dockerfile 是一个用来构建镜像的文本文件，文本内容包含了一条条构建镜像所需的指令和说明</p></blockquote><p><a href="https://www.runoob.com/docker/docker-dockerfile.html" target="_blank" rel="noopener noreferrer">Dockerfile 指令详解 | 菜鸟教程</a></p><h2 id="docker-控制" tabindex="-1"><a class="header-anchor" href="#docker-控制"><span>Docker 控制</span></a></h2><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#A6E22E;">docker</span><span style="color:#E6DB74;"> version</span><span style="color:#88846F;">                  # 查看 Docker 版本</span></span>
<span class="line"><span style="color:#A6E22E;">sudo</span><span style="color:#E6DB74;"> systemctl</span><span style="color:#E6DB74;"> start</span><span style="color:#E6DB74;"> docker</span><span style="color:#88846F;">     # 启动</span></span>
<span class="line"><span style="color:#A6E22E;">sudo</span><span style="color:#E6DB74;"> systemctl</span><span style="color:#E6DB74;"> status</span><span style="color:#E6DB74;"> docker</span><span style="color:#88846F;">    # 查看状态</span></span>
<span class="line"><span style="color:#A6E22E;">sudo</span><span style="color:#E6DB74;"> systemctl</span><span style="color:#E6DB74;"> stop</span><span style="color:#E6DB74;"> docker</span><span style="color:#88846F;">      # 停止</span></span>
<span class="line"><span style="color:#A6E22E;">sudo</span><span style="color:#E6DB74;"> systemctl</span><span style="color:#E6DB74;"> restart</span><span style="color:#E6DB74;"> docker</span><span style="color:#88846F;">   # 重启</span></span>
<span class="line"><span style="color:#A6E22E;">sudo</span><span style="color:#E6DB74;"> systemctl</span><span style="color:#E6DB74;"> enable</span><span style="color:#E6DB74;"> docker</span><span style="color:#88846F;">    # 开机启动</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="docker-镜像操作" tabindex="-1"><a class="header-anchor" href="#docker-镜像操作"><span>Docker 镜像操作</span></a></h2><h3 id="创建镜像" tabindex="-1"><a class="header-anchor" href="#创建镜像"><span>创建镜像</span></a></h3><blockquote><p>根据当前目录下的Dockerfile，构建名为image-name的镜像</p></blockquote><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#A6E22E;">docker</span><span style="color:#E6DB74;"> build</span><span style="color:#AE81FF;"> -t</span><span style="color:#E6DB74;"> image-name</span><span style="color:#AE81FF;"> \\</span></span>
<span class="line"><span style="color:#88846F;"># -f 指定Dockerfile的位置</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="其他镜像操作" tabindex="-1"><a class="header-anchor" href="#其他镜像操作"><span>其他镜像操作</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#A6E22E;">docker</span><span style="color:#E6DB74;"> search</span><span style="color:#E6DB74;"> 关键字</span><span style="color:#88846F;">        # 查看 Docker Hub 上，镜像的详细信息</span></span>
<span class="line"><span style="color:#A6E22E;">docker</span><span style="color:#E6DB74;"> pull</span><span style="color:#E6DB74;"> 镜像名:tag</span><span style="color:#88846F;">      # 拉取镜像，:tag 表示软件版本，默认 latest</span></span>
<span class="line"><span style="color:#A6E22E;">docker</span><span style="color:#E6DB74;"> images</span><span style="color:#88846F;">               # 查看本地镜像</span></span>
<span class="line"><span style="color:#A6E22E;">docker</span><span style="color:#E6DB74;"> inspect</span><span style="color:#E6DB74;"> 镜像id</span><span style="color:#88846F;">       # 查看镜像元数据，详细信息</span></span>
<span class="line"><span style="color:#A6E22E;">docker</span><span style="color:#E6DB74;"> rmi</span><span style="color:#AE81FF;"> -f</span><span style="color:#E6DB74;"> 镜像id/镜像名:tag</span><span style="color:#88846F;">  # 删除镜像，-f表示强制删除</span></span>
<span class="line"><span style="color:#A6E22E;">docker</span><span style="color:#E6DB74;"> save</span><span style="color:#AE81FF;"> -o</span><span style="color:#E6DB74;"> nginx.tar</span><span style="color:#E6DB74;"> nginx:latest</span><span style="color:#88846F;"> # 导出镜像</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="docker-容器操作" tabindex="-1"><a class="header-anchor" href="#docker-容器操作"><span>Docker 容器操作</span></a></h2><h3 id="运行容器" tabindex="-1"><a class="header-anchor" href="#运行容器"><span>运行容器</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#88846F;"># -i 以交互模式运行</span></span>
<span class="line"><span style="color:#88846F;"># -t 分配一个伪终端</span></span>
<span class="line"><span style="color:#88846F;"># -d 后台运行</span></span>
<span class="line"><span style="color:#88846F;"># -p 指定端口映射</span></span>
<span class="line"><span style="color:#88846F;"># -v 指定挂载主机目录到容器目录，:rw读写模式（默认），:ro只读模式</span></span>
<span class="line"><span style="color:#A6E22E;">docker</span><span style="color:#E6DB74;"> run</span><span style="color:#AE81FF;"> --name</span><span style="color:#E6DB74;"> 容器名称</span><span style="color:#AE81FF;"> -d</span><span style="color:#AE81FF;"> \\</span></span>
<span class="line"><span style="color:#AE81FF;">    -it</span><span style="color:#AE81FF;"> \\</span></span>
<span class="line"><span style="color:#AE81FF;">    -p</span><span style="color:#E6DB74;"> 主机端口:容器端口</span><span style="color:#AE81FF;"> \\</span></span>
<span class="line"><span style="color:#AE81FF;">    -v</span><span style="color:#E6DB74;"> 主机目录:容器目录</span><span style="color:#AE81FF;"> \\</span></span>
<span class="line"><span style="color:#E6DB74;">    镜像名称</span></span>
<span class="line"><span style="color:#88846F;"># 例</span></span>
<span class="line"><span style="color:#A6E22E;">docker</span><span style="color:#E6DB74;"> run</span><span style="color:#AE81FF;"> --name</span><span style="color:#E6DB74;"> jm-ffmpeg</span><span style="color:#AE81FF;"> -d</span><span style="color:#AE81FF;"> \\</span></span>
<span class="line"><span style="color:#AE81FF;">    -it</span><span style="color:#AE81FF;"> \\</span></span>
<span class="line"><span style="color:#AE81FF;">    -p</span><span style="color:#E6DB74;"> 主机端口:容器端口</span><span style="color:#AE81FF;"> \\</span></span>
<span class="line"><span style="color:#AE81FF;">    -v</span><span style="color:#E6DB74;"> 主机目录:容器目录</span><span style="color:#AE81FF;"> \\</span></span>
<span class="line"><span style="color:#E6DB74;">    镜像名称</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="查看正在运行的容器" tabindex="-1"><a class="header-anchor" href="#查看正在运行的容器"><span>查看正在运行的容器</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#A6E22E;">docker</span><span style="color:#E6DB74;"> ps</span><span style="color:#AE81FF;"> -aq</span><span style="color:#F8F8F2;"> </span></span>
<span class="line"><span style="color:#88846F;">    # -a 所有容器</span></span>
<span class="line"><span style="color:#88846F;">    # -q 只显示容器id</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="容器控制" tabindex="-1"><a class="header-anchor" href="#容器控制"><span>容器控制</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#A6E22E;">docker</span><span style="color:#E6DB74;"> start</span><span style="color:#E6DB74;"> 容器id或名称</span><span style="color:#88846F;">   # 启动</span></span>
<span class="line"><span style="color:#A6E22E;">docker</span><span style="color:#E6DB74;"> restart</span><span style="color:#E6DB74;"> 容器id或名称</span><span style="color:#88846F;"> # 重启</span></span>
<span class="line"><span style="color:#A6E22E;">docker</span><span style="color:#E6DB74;"> stop</span><span style="color:#E6DB74;"> 容器id或名称</span><span style="color:#88846F;">    # 停止</span></span>
<span class="line"><span style="color:#A6E22E;">docker</span><span style="color:#E6DB74;"> logs</span><span style="color:#E6DB74;"> 容器id或名称</span><span style="color:#88846F;">    # 获取日志</span></span>
<span class="line"><span style="color:#A6E22E;">docker</span><span style="color:#E6DB74;"> rm</span><span style="color:#AE81FF;"> -f</span><span style="color:#E6DB74;"> 容器id或名称</span><span style="color:#88846F;">   # 删除，-f表示强制删除</span></span>
<span class="line"><span style="color:#A6E22E;">docker</span><span style="color:#E6DB74;"> exec</span><span style="color:#AE81FF;"> -it</span><span style="color:#E6DB74;"> 容器id或名称</span><span style="color:#E6DB74;"> /bin/bash</span><span style="color:#88846F;"> # 进入运行中容器，并开启交互终端</span></span>
<span class="line"><span style="color:#88846F;"># 复制文件</span></span>
<span class="line"><span style="color:#A6E22E;">docker</span><span style="color:#E6DB74;"> cp</span><span style="color:#E6DB74;"> 主机文件路径</span><span style="color:#E6DB74;"> 容器id或名称:容器文件路径</span></span>
<span class="line"><span style="color:#A6E22E;">docker</span><span style="color:#E6DB74;"> cp</span><span style="color:#E6DB74;"> 容器id或名称:容器文件路径</span><span style="color:#E6DB74;"> 主机文件路径</span></span>
<span class="line"><span style="color:#A6E22E;">docker</span><span style="color:#E6DB74;"> inspect</span><span style="color:#E6DB74;"> 容器id</span><span style="color:#88846F;">       # 获取容器元信息</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>将容器保存为镜像（不推荐使用）</p></blockquote><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#A6E22E;">docker</span><span style="color:#E6DB74;"> commit</span><span style="color:#E6DB74;"> 容器</span><span style="color:#E6DB74;"> 镜像名</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div>`,35)]))}const d=n(p,[["render",r]]),y=JSON.parse('{"path":"/servers/docker/","title":"Docker","lang":"zh-CN","frontmatter":{},"git":{},"readingTime":{"minutes":2.47,"words":742},"filePathRelative":"servers/docker/README.md"}');export{d as comp,y as data};
